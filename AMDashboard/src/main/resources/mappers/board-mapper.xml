<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="boardMapper">
    
    
    <resultMap type="Store" id="storeResultSet">
	    <id property="storeNo" column="STORE_NO"/>
	    <result property="storeName" column="STORE_NM"/>
	    <result property="storePhone" column="STORE_PHONE"/>
	    <result property="storeAddress" column="STORE_ADDR"/>
	    <result property="storeBizNo" column="STORE_BIZ_NO"/>
	    <result property="storeBizCheck" column="STORE_BIZ_CHECK"/>
	    <result property="memberNo" column="MEMBER_NO"/>
	    <result property="memberName" column="MEMBER_NM"/>
	    <result property="memberEmail" column="MEMBER_EMAIL"/>
	    <result property="memberEnrollDate" column="MEMBER_ENROLL_DT"/>
	    <result property="memberStatus" column="MEMBER_STATUS"/>
	    <result property="memberPhone" column="MEMBER_PHONE"/>
	    
  </resultMap>
  
  
  
  <!--  사장 회원 조회 -->
  <select id="storeList" resultMap="storeResultSet" >
     SELECT MEMBER_NM, MEMBER_EMAIL, MEMBER_ENROLL_DT, STORE_NM, 
               STORE_PHONE, STORE_ADDR,MEMBER_STATUS
			FROM STORE
			JOIN MEMBER USING (MEMBER_NO)
  </select>
  
  <!-- 알바 회원 조회 -->
  <select id="employeeList" resultMap="storeResultSet">
      SELECT MEMBER_NM, MEMBER_EMAIL, MEMBER_ENROLL_DT, STORE_NM, 
                MEMBER_PHONE,MEMBER_STATUS
       FROM EMPLOYEE
      JOIN MEMBER USING (MEMBER_NO)
      JOIN STORE USING (STORE_NO)
  </select>
  
  <!-- 사장 인증 조회 -->
  <select id="confirmList" resultMap="storeResultSet">
      SELECT STORE_NO, STORE_NM, STORE_BIZ_NO, MEMBER_ENROLL_DT,STORE_BIZ_CHECK
       FROM STORE
      JOIN MEMBER USING (MEMBER_NO)
       
  </select>
  
  <!-- 사장 회원 인증 -->
    <update id="userConfirm" parameterType="_int" >
      UPDATE STORE SET 
      STORE_BIZ_CHECK = 'N'
      WHERE STORE_NO = #{storeNo}
      
  </update>
  
  <!-- 사장 회원 상세 조회 -->
  <select id="storeConfirm"  parameterType="_int" resultMap="storeResultSet">
		  	SELECT STORE_NO, MEMBER_NM, MEMBER_EMAIL, MEMBER_PHONE, STORE_NM,
				STORE_BIZ_NO,STORE_PHONE,STORE_ADDR
				FROM STORE
				JOIN MEMBER USING (MEMBER_NO)
				WHERE STORE_NO = #{storeNo}
				AND MEMBER_STATUS = 'Y'
      
  </select>
  
</mapper>






